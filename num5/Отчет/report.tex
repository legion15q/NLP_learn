%%  A report on laboratory work 2.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[12pt,a4paper]{article}

%%  Стандартные языковые команды
\usepackage[cp1251]{inputenc}
\usepackage[russian]{babel}
%\usepackage[T2A]{fontenc}   %  это устанавливается авторматически

%%  Подключение стилевого файла отчета
\usepackage{kprj}

%%   Подключение пакета управления гиперссылками (только для pdftex)
\ifpdftex
   \BlackColorLinks
\fi

%%  Для подключения рисунков (разные форматы при разном компилировании)
\ifpdftex
  % pdftex понимает форматы рисунков PNG, JPEG, PDF
  \DeclareGraphicsExtensions{.pdf}
\else
  % При создании DVI возможны практически все форматы, но EPS предпочтительнее
  \DeclareGraphicsExtensions{.eps}
\fi


%%%    Тип работы
\LabWork                      %   тип документа -- лабораторная работа
\LabWorkNo{5}                 %   номер лабораторной работы
%\variant{5}                   %   вариант лабораторной
%\KursWork
%\KursProject
%\NIR
%\VKR
%\NKR


%%%  Данные для оформления

\author{С.С.~Погосян}                     %   автор
%\authorfull{Курош Владимир Витальевич}  %   автор -- Фамилия, Имя, Отчество
\workyear{2021}                         %   год выполнения работы
\title{}   %  название
\discipline{Информационный поиск и извлечение информации из текстов}              %  учебная дисциплина
\group{ИУ9-21М}                          %   группа
\faculty{Информатика и системы управления}         %   Факультет
%\facultyshort{ФН}                       %   Факультет -- аббревиатура
%\chair{}    %   кафедра
%\chairno{ФН-12}                         %   кафедра -- аббревиатура
%\chairhead{А.П.~Крищенко}               %   зав. кафедрой
\chief{Н.В.~Лукашевич}                     %   Руководитель работы
%\consultant{А.Ф.~Сидоров}               %   Консультант (если нужно)
%\inspector{Б.О.~Волков}                 %   Нормоконтролер
%\trend{учебная}                         %   Направление работы (указывается в задании)
%\themesource{кафедра}                   %   Источник темы (указывается в задании)

\equationnumbering{section}             %   если нумерация формул в пределах раздела (иначе единая нумерация)
%\figurenumbering{section}              %   (аналогично для рисунков)
%%%   Оформление содержания, в текст вставлять командой \tableofcontents
%\SkipContentsbreak                     %   Подавление разрыва страницы после содержания
%\setcontentsname{Оглавление}           %   Заголовок содержания
%\def\contsectionfont{\bfseries}        %   шрифт для разделов в содержании
%\def\contsubsectionfont{\sf}           %   шрифт для подразделов в содержании
%\setcounter{secnumdepth}{1}            %   глубина заголовков в содержании


\usepackage{hyperref}

\begin{document}	
\maketitle
%\tableofcontents
\newpage
\section{Постановка задачи}
\begin{figure}[h!]
\includegraphics[scale=0.67]{1.png}
\end{figure} 
\begin{figure}[h!]
\includegraphics[scale=0.67]{2.png}
\end{figure} 

\section{Решение}
Приведенный в приложении код (доступен по ссылке: \url{} )вычисляет pagerank документов для полученных матриц перехода каждого веб-графа. \\
Матрица переходов для веб-графа 1:
$$
A_1 = \begin{pmatrix}
\dfrac{1}{30} & \dfrac{1}{30} +0.9* \dfrac{1}{2} & \dfrac{1}{30} + 0.9*\dfrac{1}{2}\\
\\
\dfrac{1}{30} & \dfrac{1}{30} & \dfrac{1}{30} + 0.9\\
\\
\dfrac{1}{30} & \dfrac{1}{30} + 0.9 & \dfrac{1}{30}
\end{pmatrix}.
$$
Начальное вектор состояния будет заполнен равными вероятностями оказаться в том или ином состоянии:
$$
x_1 = (\dfrac{1}{3}, \dfrac{1}{3}, \dfrac{1}{3}).
$$
Аналогично для веб-графа 2:
$$
A_2 = \begin{pmatrix}
0.0125 & 0.3125 & 0.3125 & 0.3125 & 0.0125 & 0.0125 & 0.0125 & 0.0125 \\
0.9125 & 0.0125 & 0.0125 & 0.0125 & 0.0125 & 0.0125 & 0.0125 & 0.0125 \\
0.9125 & 0.0125 & 0.0125 & 0.0125 & 0.0125 & 0.0125 & 0.0125 & 0.0125 \\
0.1925 & 0.0125 & 0.0125 & 0.0125 & 0.1925 & 0.1925 & 0.1925 & 0.1925 \\
0.1250 & 0.1250 & 0.1250 & 0.1250 & 0.1250  & 0.1250 & 0.1250 & 0.1250 \\ 
0.1250  & 0.1250 & 0.1250 & 0.1250&  0.1250 &  0.1250 & 0.1250 & 0.1250 \\
0.1250 & 0.1250 & 0.1250 & 0.1250 & 0.1250 & 0.1250 & 0.1250 &  0.1250 \\
0.1250&  0.1250&  0.1250&  0.1250 & 0.1250&  0.1250 & 0.1250 & 0.1250 \\
\end{pmatrix} ,
$$
$$
x_2 = (\dfrac{1}{8}, \dfrac{1}{8}, \dfrac{1}{8}, \dfrac{1}{8}, \dfrac{1}{8}, \dfrac{1}{8}, \dfrac{1}{8}, \dfrac{1}{8} ).
$$
Критерий останова выберем следующий:
$$
|xA - x_{i+1}A| < \epsilon,
$$
\noindent где $\epsilon = 0.0001$ 
Итерационный процесс сходится для каждой матрицы со следующими параметрами:
\begin{enumerate}
\item $i = 2, \quad$ $x = (0.03333333, 0.48333333, 0.48333333)$
\item $i = 18, \quad $ $x = (0.3148, 0.1380, 0.1380, 0.1380, 0.0677, 0.0677, 0.0677, 0.0677)$
\end{enumerate}
\section{Приложение}
\begin{verbatim}
import numpy as np



def main():
    x = [1 / 3, 1 / 3, 1 / 3]
    A = ([0.033, 0.483, 0.483],
         [0.033, 0.033, 0.933],
         [0.033, 0.933, 0.033]
         )
    eps = [1e-3]*len(x)
    i = 0
    while True:
        x_new = np.dot(x, A)
        i += 1
        if all(np.dot(x, A) - np.dot(x_new, A) < eps):
            break
        x = x_new
    print(i)
    print(x_new)

    A = ([0.0125, 0.3125, 0.3125, 0.3125, 0.0125, 0.0125, 0.0125, 0.0125],
         [0.9125, 0.0125, 0.0125, 0.0125, 0.0125, 0.0125, 0.0125, 0.0125],
         [0.9125, 0.0125, 0.0125, 0.0125, 0.0125, 0.0125, 0.0125, 0.0125],
         [0.1925, 0.0125, 0.0125, 0.0125, 0.1925, 0.1925, 0.1925, 0.1925],
         [0.1250, 0.1250, 0.1250, 0.1250, 0.1250, 0.1250, 0.1250, 0.1250],
         [0.1250, 0.1250, 0.1250, 0.1250, 0.1250, 0.1250, 0.1250, 0.1250],
         [0.1250, 0.1250, 0.1250, 0.1250, 0.1250, 0.1250, 0.1250, 0.1250],
         [0.1250, 0.1250, 0.1250, 0.1250, 0.1250, 0.1250, 0.1250, 0.1250],
    )
    x = [1/8, 1/8, 1/8, 1/8, 1/8, 1/8, 1/8, 1/8]
    i = 0
    eps = [1e-3] * len(x)
    while True:
        x_new = np.dot(x, A)
        i += 1
        if all(np.dot(x, A) - np.dot(x_new, A) < eps):
            break
        x = x_new
    print(i)
    print(x_new)


if __name__ == '__main__':
    main()


\end{verbatim}
\end{document}