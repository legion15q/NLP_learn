%%  A report on laboratory work 2.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[12pt,a4paper]{article}

%%  Стандартные языковые команды
\usepackage[cp1251]{inputenc}
\usepackage[russian]{babel}
%\usepackage[T2A]{fontenc}   %  это устанавливается авторматически

%%  Подключение стилевого файла отчета
\usepackage{kprj}

%%   Подключение пакета управления гиперссылками (только для pdftex)
\ifpdftex
   \BlackColorLinks
\fi

%%  Для подключения рисунков (разные форматы при разном компилировании)
\ifpdftex
  % pdftex понимает форматы рисунков PNG, JPEG, PDF
  \DeclareGraphicsExtensions{.pdf}
\else
  % При создании DVI возможны практически все форматы, но EPS предпочтительнее
  \DeclareGraphicsExtensions{.eps}
\fi


%%%    Тип работы
\LabWork                      %   тип документа -- лабораторная работа
\LabWorkNo{7}                 %   номер лабораторной работы
%\variant{5}                   %   вариант лабораторной
%\KursWork
%\KursProject
%\NIR
%\VKR
%\NKR


%%%  Данные для оформления

\author{С.С.~Погосян}                     %   автор
%\authorfull{Курош Владимир Витальевич}  %   автор -- Фамилия, Имя, Отчество
\workyear{2021}                         %   год выполнения работы
\title{}   %  название
\discipline{Информационный поиск и извлечение информации из текстов}              %  учебная дисциплина
\group{ИУ9-21М}                          %   группа
\faculty{Информатика и системы управления}         %   Факультет
%\facultyshort{ФН}                       %   Факультет -- аббревиатура
%\chair{}    %   кафедра
%\chairno{ФН-12}                         %   кафедра -- аббревиатура
%\chairhead{А.П.~Крищенко}               %   зав. кафедрой
\chief{Н.В.~Лукашевич}                     %   Руководитель работы
%\consultant{А.Ф.~Сидоров}               %   Консультант (если нужно)
%\inspector{Б.О.~Волков}                 %   Нормоконтролер
%\trend{учебная}                         %   Направление работы (указывается в задании)
%\themesource{кафедра}                   %   Источник темы (указывается в задании)

\equationnumbering{section}             %   если нумерация формул в пределах раздела (иначе единая нумерация)
%\figurenumbering{section}              %   (аналогично для рисунков)
%%%   Оформление содержания, в текст вставлять командой \tableofcontents
%\SkipContentsbreak                     %   Подавление разрыва страницы после содержания
%\setcontentsname{Оглавление}           %   Заголовок содержания
%\def\contsectionfont{\bfseries}        %   шрифт для разделов в содержании
%\def\contsubsectionfont{\sf}           %   шрифт для подразделов в содержании
%\setcounter{secnumdepth}{1}            %   глубина заголовков в содержании


\usepackage{hyperref}

\begin{document}	
\maketitle
%\tableofcontents
\newpage
\section{Постановка задачи}
\begin{figure}[h!]
\includegraphics[scale=0.7]{1.png}
\end{figure}
\begin{figure}[h!]
\includegraphics[scale=0.7]{2.png}
\end{figure}
\section{Решение}
\url{https://github.com/legion15q/sem2/blob/master/num7-8/%D0%9E%D1%82%D1%87%D0%B5%D1%82/Rwru6ysY4z4.jpg}\\
\\
\url{https://github.com/legion15q/sem2/blob/master/num7-8/%D0%9E%D1%82%D1%87%D0%B5%D1%82/yQLvY_KZvfw.jpg}
\subsection{Задача 1}
\begin{equation*}
\text { 1) } T P+F P=100 ;\quad TP=50; \quad
FP =50; \quad FN = 10
\end{equation*}
\begin{equation*}
\text { Precision }=\frac{50}{100}=\frac{5}{10}=\frac{1}{2}
\end{equation*}
\begin{equation*}
\text{Recall}=\frac{50}{75}=\frac{2}{3} 
\end{equation*}
\begin{equation*}
F_{1 \text{score}} =\frac{2 \cdot Pr \cdot Rec}{Pr+Rec}=\frac{2 \cdot \frac{1}{2} \cdot \frac{2}{3}}{\frac{1}{2}+\frac{2}{3}}=\frac{\frac{4}{6}}{\frac{7}{6}}=\frac{4}{7}
\end{equation*}




\begin{equation*}
\text { 2) Precision }=\frac{30}{40}=\frac{3}{4}  
\end{equation*}
\begin{equation*}
\text{Recall}=\frac{30}{50}=\frac{3}{5} 
\end{equation*}
\begin{equation*}
FP = 10; \quad FN = 50; \quad TP = 30
\end{equation*}
\begin{equation*}
F_{1 \text{score}} =\frac{2 \cdot Pr \cdot Rec}{Pr+Rec}=\frac{2 \cdot \frac{3}{4} \cdot \frac{3}{5}}{\frac{3}{4}+\frac{3}{5}}=\frac{2}{3} = 0,66
\end{equation*}
\begin{equation*}
\text {Macro}F_{1}= \dfrac{1}{N}\sum_{i=0}^{N} F_{1_{score}} = \dfrac{1}{2}(\dfrac{2}{3} + \dfrac{4}{7}) = 0.61
\end{equation*}
\begin{equation*}
\text {MacroPrecision}=\frac{P R_{1}+P R_{2}}{2}= \frac{\frac{3}{4}+\frac{1}{2}}{2}=\frac{5}{8}
=0,625
\end{equation*}
\begin{equation*}
\text { MacroRecall}=\dfrac{Rec_1 + Rec_2}{2}=\dfrac{\frac{2}{3}+\frac{3}{5}}{2}=\dfrac{19}{30}
=0,63
\end{equation*}

\begin{equation*}
\begin{aligned}
\text {MicroRecall}=\frac{T P_{1}+TP_{2}}{T P_{1}+TP_{2}+F N_{1}+F N_{2}}=\dfrac{50+30}{50+30+10+50}=  0.64
\end{aligned}
\end{equation*}

\begin{equation*}
\begin{aligned}
\text {MicroPrecision}=\frac{T P_{1} + TP_2}{T P_{1} + TP_2 + FP_1 + F P_{2}}  = & \dfrac{50 + 30 }{50+ 50 + 10+30} =0.57
\end{aligned}
\end{equation*}

\begin{equation*}
\text {Micro}F_{1_{score}} = \dfrac{2Pr_{micro}  Rec_{micro}}{Pr_{micro}+Rec_{micro}} = 0.603
\end{equation*}

\subsection{Задача 2}
\begin{equation*}
\begin{array}{l}
P\left(C_{1}\right)=\frac{N\left(C=C_{1}\right)}{N}=0,667 \\
P\left( C_{2}\right)=\frac{N\left(C = C_{2}\right)}{N}=0,33 \\
P\left(x_{1} \mid C_{1}\right)=0,25 ; \quad P\left(x_{1} \mid C_{2}\right)=0,11 \\
P\left(x_{4} \mid C_{1}\right)=0,16 ; \quad  P\left(x_{4} \mid C_{2}\right)=0,22 \\
P\left(x_{5} \mid C_{1}\right)=0,083 ; \quad P\left(x_{5} \mid C_{2}\right)=0,22
\end{array}
\end{equation*}
\begin{equation*}
\begin{aligned}
P(\tilde{C}_{1}) &=P\left(C_{1}\right) \cdot P\left(x_{1} \mid C_{1}\right) \cdot C\left(x_{4} \mid C_{1}\right) \cdot P\left(x_{5} \mid C_{1}\right)=\\
&=0,667 \cdot 0,25 \cdot 0,16 \cdot 0,083=0,0022
\end{aligned}
\end{equation*}
\begin{equation*}
\begin{aligned}
P(\tilde{C}_{2}) &=P\left(C_{2}\right) \cdot P\left(x_{1} \mid C_{2}\right) \cdot P\left(x_{4} \mid C_{2}\right) \cdot P\left(x_5\mid C_{2}\right)=\\
&=0,33 \cdot 0,11 \cdot 0,22 \cdot 0,22=0,0017
\end{aligned}
\end{equation*}
\begin{equation*}
\begin{array}{l}
\arg \max \left\{P(\tilde{C}_{1}), P(\tilde{C}_{2})\right\}=1 \Rightarrow 
D_4\left(x_{1}, x_{4}, x_{5}\right) \in C_{1}
\end{array}
\end{equation*}


\end{document}